{"version":3,"sources":["scripts/modules/httpreq.ts","scripts/modules/i18n.ts","scripts/modules/lazyload.ts","scripts/main.ts","index.js"],"names":[],"mappings":"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","file":"LeBouton-website.e379a81f.map","sourceRoot":"..","sourcesContent":["export class httpreq {\n\n    public static async get(path: string): Promise<any> {\n        return new Promise((resolve) => {\n            var r = new XMLHttpRequest();\n            r.open('GET', path, true);\n            r.onreadystatechange = function () {\n            if (r.readyState != 4 || r.status != 200) return;\n                resolve(JSON.parse(r.responseText));\n            };\n            r.send();\n        })\n    }\n\n}","import {httpreq} from './httpreq';\n\nexport class i18n {\n\n    static AVAILABLE_LANGUAGES = [\n        {\n            label: 'Français',\n            prefix: 'fr'\n        }, {\n            label: 'English',\n            prefix: 'en'\n        }\n    ]\n\n    static DEFAULT_LANGUAGE = 'en';\n\n    public static bootstrap() :void {\n        \n        const lang = i18n.detectLanguage();\n        \n        const langExists = i18n.AVAILABLE_LANGUAGES.find(l => l.prefix === lang);\n        \n        if (!langExists) {\n            i18n.initUiForLanguage(i18n.DEFAULT_LANGUAGE);\n        } else {\n            i18n.initUiForLanguage(lang);\n        }\n        \n    }\n    \n    private static initUiForLanguage(lang: string) {\n        console.log(`[i18n] initUiForLanguage for ${lang}`);\n        \n        const $ui = document.querySelector('#i18n-menu');\n        \n        $ui.classList.remove('hidden');\n\n        const $select = $ui.querySelector('select');\n\n        $select.value = lang;\n\n        if (lang !== i18n.DEFAULT_LANGUAGE) {\n            i18n.loadLangStrings(lang);\n        }\n\n        $select.addEventListener('change', async (event: Event) => {\n            \n            const $select = (event.target as HTMLSelectElement);\n\n            $select.setAttribute('disabled', 'true');\n\n            const lang = $select.value;\n\n            await i18n.loadLangStrings(lang);\n\n            $select.removeAttribute('disabled');\n\n        });\n\n    }\n\n    private static async loadLangStrings(lang: string) {\n\n        const langData = await httpreq.get(`./locales/${lang}.json`);\n\n        [].forEach.call(document.querySelectorAll('[data-i18n]'), ($el: HTMLElement) => {\n            const i18nKey = $el.getAttribute('data-i18n');\n            if (langData[i18nKey]) {\n                $el.innerHTML = langData[i18nKey];\n            }\n        });\n\n        // TODO ; mieux d'avoir une page index.html par langue ? de toute façon il n'y aura qu'une page ... ou alors de faire du JS pour internationnlisé ?\n        // https://webmasters.stackexchange.com/questions/119138/root-index-html-file-of-a-multi-language-website\n        // et balises meta\n        // <meta http-equiv=”content-language” content=”en-us”>\n    }\n\n    private static detectLanguage(): string {\n    \n        let found = i18n.DEFAULT_LANGUAGE;\n        \n        if (typeof window.navigator !== 'undefined') {\n            if (window.navigator.languages && window.navigator.languages.length > 0) {\n                found = window.navigator.languages[0];\n            } else if (window.navigator.userLanguage) {\n                found = window.navigator.userLanguage;\n            } else if (window.navigator.language) {\n                found = window.navigator.language;\n            }\n        }\n\n        if (found.indexOf('-')) {\n            found = found.substring(0, found.indexOf('-'));\n        }\n    \n        return found;\n    }\n\n}\n","\nexport class lazyload {\n\n    public static bootstrap() :void {\n\n        const $imgEls = document.querySelectorAll('img[data-src]');\n        const $bgEls = document.querySelectorAll('[data-lazyload-bg]');\n        \n        lazyload.checkImgTags($imgEls);\n        lazyload.checkDivBg($bgEls);\n\n        window.addEventListener('scroll', (event) => {\n            lazyload.checkImgTags($imgEls);\n            lazyload.checkDivBg($bgEls);\n        });\n\n    }\n\n    private static checkImgTags($els) {\n        [].forEach.call($els, ($el: HTMLElement) => {\n            if ($el.getAttribute('src').indexOf('base64') > 0) {\n                if (lazyload.isVisible($el)) {\n                    const src = $el.getAttribute('data-src');\n                    console.log(`[lazyload] loading image ${src}`);\n                    $el.setAttribute('src', src);\n                }\n            }\n        });\n    }\n\n    private static checkDivBg($bgEls) {\n        [].forEach.call($bgEls, ($el: HTMLElement) => {\n            if ($el.getAttribute('data-lazyload-bg') !== 'loaded') {\n                if (lazyload.isVisible($el)) {\n                    console.log(`[lazyload] loading image bg`, $el);\n                    $el.setAttribute('data-lazyload-bg', 'loaded');\n                }\n            }\n            \n        });\n    }\n\n    private static isVisible($el: HTMLElement): boolean {\n        var bounding = $el.getBoundingClientRect();\n\n        var windowHeight = (window.innerHeight || document.documentElement.clientHeight);\n        var windowWidth = (window.innerWidth || document.documentElement.clientWidth);\n        var vertInView = (bounding.top <= windowHeight) && ((bounding.top + bounding.height) >= 0);\n        var horInView = (bounding.left <= windowWidth) && ((bounding.left + bounding.width) >= 0);\n        return (vertInView && horInView);\n\n    }\n}\n","import {i18n} from './modules/i18n';\nimport {lazyload} from './modules/lazyload';\n\nexport default function(): void {\n  console.log('hello world');\n\n  i18n.bootstrap();\n\n  lazyload.bootstrap();\n};","import less from './styles/index.less';\nimport main from './scripts/main';\n\nmain();"]}